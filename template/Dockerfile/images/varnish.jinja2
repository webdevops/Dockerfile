{% import 'Dockerfile/docker.jinja2' as docker %}
{% import 'Dockerfile/provision.jinja2' as provision %}

{% macro env() -%}
ENV VARNISH_PORT    80

ENV VARNISH_CONFIG  ""
ENV VARNISH_STORAGE "malloc,128m"
ENV VARNISH_OPTS    ""

ENV VARNISH_BACKEND_HOST ""
ENV VARNISH_BACKEND_PORT "80"
{%- endmacro %}


{% macro alpine() -%}
RUN /usr/local/bin/apk-install \
        varnish \
    {{ docker.cleanup() }}
{%- endmacro %}
